// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Notification {
  id        String   @id @default(cuid())
  userId    String
  type      NotificationType
  title     String
  message   String
  data      Json?
  read      Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("notifications")
}

model EmailTemplate {
  id        String   @id @default(cuid())
  name      String   @unique
  subject   String
  htmlBody  String
  textBody  String?
  variables Json?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("email_templates")
}

model NotificationPreference {
  id                String  @id @default(cuid())
  userId            String  @unique
  emailEnabled      Boolean @default(true)
  pushEnabled       Boolean @default(true)
  smsEnabled        Boolean @default(false)
  auctionUpdates    Boolean @default(true)
  bidUpdates        Boolean @default(true)
  paymentUpdates    Boolean @default(true)
  marketingEmails   Boolean @default(false)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@map("notification_preferences")
}

enum NotificationType {
  AUCTION_CREATED
  AUCTION_STARTED
  AUCTION_ENDING_SOON
  AUCTION_ENDED
  BID_PLACED
  BID_OUTBID
  BID_WON
  PAYMENT_REQUIRED
  PAYMENT_RECEIVED
  PAYMENT_FAILED
  VEHICLE_APPROVED
  VEHICLE_REJECTED
  ACCOUNT_VERIFIED
  PASSWORD_RESET
  SYSTEM_MAINTENANCE
  MARKETING
}
