generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Category {
  id          String    @id @default(cuid())
  name        String    @unique
  description String?
  isActive    Boolean   @default(true)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  vehicles    Vehicle[]

  @@map("categories")
}

model Vehicle {
  id             String           @id @default(cuid())
  make           String
  model          String
  year           Int
  mileage        Int
  fuelType       FuelType
  transmission   TransmissionType
  condition      VehicleCondition
  status         VehicleStatus    @default(DRAFT)
  description    String?
  images         String[]         @default([])
  engineSize     Float?
  color          String?
  vin            String?          @unique
  licensePlate   String?
  location       String?
  estimatedValue Float?
  reservePrice   Float?
  userId         String
  categoryId     String
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  auctions       auctions?
  category       Category         @relation(fields: [categoryId], references: [id])

  @@map("vehicles")
}

model auctions {
  id           String        @id
  title        String
  description  String?
  startPrice   Float
  reservePrice Float?
  currentBid   Float?
  startTime    DateTime
  endTime      DateTime
  status       AuctionStatus @default(DRAFT)
  vehicleId    String        @unique
  userId       String
  winnerId     String?
  createdAt    DateTime      @default(now())
  updatedAt    DateTime
  vehicles     Vehicle       @relation(fields: [vehicleId], references: [id])
  bids         bids[]
}

model bids {
  id        String   @id
  amount    Float
  userId    String
  auctionId String
  createdAt DateTime @default(now())
  auctions  auctions @relation(fields: [auctionId], references: [id])
}

enum FuelType {
  GASOLINE
  DIESEL
  ELECTRIC
  HYBRID
  LPG
  CNG
}

enum TransmissionType {
  MANUAL
  AUTOMATIC
  CVT
  SEMI_AUTOMATIC
}

enum VehicleCondition {
  NEW
  EXCELLENT
  GOOD
  FAIR
  POOR
  DAMAGED
}

enum VehicleStatus {
  ACTIVE
  INACTIVE
  SOLD
  PENDING
  DRAFT
}

enum AuctionStatus {
  DRAFT
  ACTIVE
  ENDED
  CANCELLED
}
